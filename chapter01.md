# 1. Java プログラミングの基礎的事項

オブジェクト指向プログラミングは、プログラムをオブジェクト (データ構造とそれに対する操作)
の集合体として捉え、オブジェクト間の操作の呼び出しによりプログラムを実行しようとする考え方です。
今日では構造化プログラミング、関数型プログラミングと並ぶ重要なプログラミングの考え方で、
Java は主にオブジェクト指向プログラミングを想定して設計されたプログラミング言語です。

ここでは、Java で記述した様々なオブジェクトを例にとり、Java の言語仕様がサポートする様々な
オブジェクト指向プログラミングのからくりを見てゆきます。

## 1.1. クラスとインスタンス

Java のオブジェクト表現にはクラスとインスタンスという考え方があります。

クラスは、オブジェクトのデータ構造とそれに対する操作がどのように表現されるかを表した設計のようなものです。
「Java のソースコード」と言ったときは、クラスの記述 (または記述したファイル) のことを指します。

インスタンスは、あるクラスによって表され Java VM (Java の実行環境) 上に確保されたオブジェクトの実体です。
Java VM にはヒープメモリと呼ばれるメモリ領域が用意されており、インスタンスはヒープメモリ上に確保された、
実際に実行可能なオブジェクト (= プログラムの部品) です。

Java のプログラミングを習得するにあたって、クラスとインスタンスの違いは明確に意識するようにしてください。

## 1.2. ソースファイルとクラスファイル

Java のプログラムは以下の手順で作成・実行します:

1. Java のソースコードを記述したソースファイルを作成する (拡張子は .java)。
2. ソースファイルをコンパイルしてクラスファイルを作成する (拡張子は .class)。
3. クラスファイルを Java VM 上で実行する。

Java のクラスファイルはどの OS でコンパイルしても同じものが作成され、実行する OS に依存しません。
実際には Java VM はクラスファイルを読み込み、それを OS 固有のコードに変換して実行します。
これが Java VM (Java Virtual Machine ; Java 仮想マシン) と呼ばれる所以です。

Java VM については、Java のプログラムを動作させるのに必要なもの、という程度の認識で当座は問題ありません。
なお、Java 以外の言語も同様に VM 上で動作することを前提としているものは多数ありますが、
Java VM の実行効率は群を抜いて優れており、プログラムの書き方次第では C++ で書かれた OS 固有のコードと同等か、
それ以上の実行速度が得られるとも言われています。

## 1.3. クラス名とパッケージ

Java のクラス名は、Unicode で表現できるほとんどの名前 (日本語の漢字を含む) を使用することができます。
ただし、一般的には ASCII のアルファベットで表現可能な範囲で命名します。
クラス名に関するその他の規則としては以下の点が挙げられます。

* 先頭文字を数字にすることはできません (言語使用上の制限)。
* - (ハイフン) を含めることはできません (言語使用上の制限)。
* _ (アンダーバー) だけを名前とすることはできません (言語使用上の制限)。
* 基本的にキャメルケース (例: CharSequence) を使用し、スネークケース (例: char_sequence) は使用しません。
また、先頭は英大文字で始めます (慣習)。

クラスのソースファイル名は、クラス名に拡張子 .java を付加したもの (例: CharSequence.java) となります。

クラス名には、上記に示した基本クラス名と、所属するパッケージ名を付加した完全クラス名があります。
パッケージ名とは、クラス名の重複によるトラブルを回避するために付加する補助的な名前です。
クラスを識別するときには、原則としてパッケージ名を含む完全クラス名を使用します (※例外あり)。

パッケージ名は . (ピリオド) でつないで階層構造のように表現することができます。
ソースファイルに対応するパッケージはディレクトリ (フォルダ) の階層によって表現します。
例えば、java.math.BigDecimal クラス (基本クラス名: BigDecimal、パッケージ名: java.math) の場合、
ソースファイルは java/math/BigDecimal.java となります。

※プログラム中でクラスを参照する場合には、原則として完全クラス名で記述しなければなりませんが、
以下の場合はパッケージ名を省略することができます。詳細は別途説明します。

* ソースコードで import 文を使用した場合。
* java.lang パッケージのクラスを参照する場合。

## 1.4. JAR ファイルとクラスパス

実際に Java のプログラムを記述すると大量のクラスファイルが作成されることになります。
そのままでは扱いづらいため、クラスファイルを適切なまとまりで ZIP アーカイブして、
ZIP アーカイブ内のクラスファイルを Java VM に読み込んでプログラムを実行する仕掛けが Java に備わっています。

この ZIP アーカイブにはクラスファイルの他に追加情報が含まれるため、拡張子を .jar として、
JAR (Java ARchive) ファイルと呼びます。
JAR ファイルが存在する関係で、Java の API には ZIP アーカイブを操作するものが豊富に用意されています。

Java VM が読み込むクラスファイルの場所は、デフォルトではカレントディレクトリになっています。
しかし、JAR ファイルはその原則に従わないため、別途 Java VM に JAR ファイルの場所を指定する必要があります。
Java ではその場所のことをクラスパスと呼んでいます。
クラスパスにはクラスファイルのディレクトリまたは JAR ファイルを必要な数だけ指定することができます。

Java プログラムの実行時に発生する問題の 1 つとして、このクラスパスが適切に設定されていないため、
必要な JAR ファイルを読み込むことができない事象が挙げられます。

## 1.5. Java プログラムのビルド

Java のプログラムをすべてコンパイル、テスト、パッケージング (JAR ファイル化) する作業は、
プログラムの規模が大きくなるほど確実に行うことが難しくなります。
これら一連の作業は定型化されているため、ツールを用いて自動化した方が良いでしょう。
Java には、Ant、Maven、Gradle 等といったビルド作業を自動化するツールが揃っているため、これらを用いるのが便利です。
現在の主流は Maven ですが、最近では Gradle が利用されるケースも増えています。

統合開発環境 (エディタ、コンパイラ、デバッガ等が一体になったツール) にも独自のビルドツールが内蔵されていますが、
異なる統合開発環境の間で互換性がないため、利用はお勧めできません。
また、最近の統合開発環境は Maven 等と連携でき、統合開発環境上から Maven 等でビルドが可能であるため、
敢えて独自のビルドツールを利用する必要性もありません。
